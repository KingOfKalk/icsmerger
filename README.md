# ICS Merger

A script to download and merge multiple online ICS resources into one ICS.

[![CI-QA-Pipeline](https://github.com/KingOfKalk/icsmerger/actions/workflows/ci-qa-pipeline.yml/badge.svg)](https://github.com/KingOfKalk/icsmerger/actions/workflows/ci-qa-pipeline.yml)
[![Docker Image CI](https://github.com/KingOfKalk/icsmerger/actions/workflows/docker-image.yml/badge.svg)](https://github.com/KingOfKalk/icsmerger/actions/workflows/docker-image.yml)
[![CodeQL](https://github.com/KingOfKalk/icsmerger/actions/workflows/codeql-analysis.yml/badge.svg)](https://github.com/KingOfKalk/icsmerger/actions/workflows/codeql-analysis.yml)

## Run

There are threw ways to run this script.
Call the console script, via Python or using Docker.

### Console script

```
icsmerger
```

### Python

```
python -m icsmerger
```

### Docker

```
docker pull ghcr.io/kingofkalk/icsmerger:main
docker run ghcr.io/kingofkalk/icsmerger python3 -m icsmerger -h
```

## Usage

### Show help message

```
icsmerger -h
```

### Ignore HTTP errors

With this option HTTP status codes equals or greater 400 are ignored.
Otherwise script will exit with error code 1.

```
icsmerger --ignore-http-errors https://returns-500.com/one.ics https://returns-401.com/one.ics
```

### Output to *stdout*

```
icsmerger https://url.to/one.ics https://url.to/second.ics
```

### Save to a *file*

```
icsmerger https://url.to/one.ics https://url.to/second.ics --out new.ics
```

## Development

Install required packages.

```
pip install -r requirements.txt
pip install -r requirements_dev.txt
```

In directory *tests* you will find the unit tests.

### Run tests

This project uses *pytest*.
Everything is already setup.
See *pyproject.toml*.
Also code coverage reports a generated by default.

```
pytest
```
